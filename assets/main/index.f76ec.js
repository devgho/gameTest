window.__require=function t(e,o,n){function i(c,s){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var p="function"==typeof __require&&__require;if(!s&&p)return p(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var l=o[c]={exports:{}};e[c][0].call(l.exports,function(t){return i(e[c][1][t]||t)},l,l.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({Bullet:[function(t,e,o){"use strict";cc._RF.push(e,"38235DiF1BIZby3AF96zFS3","Bullet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=0,e.atk=10,e.isStop=!1,e.clips=[],e}return i(e,t),e.prototype.start=function(){if(this.initBullet(),this.type<2||4==this.type){var t=this.enemy.convertToWorldSpaceAR(cc.v2(0,0)),e=this.node.convertToWorldSpaceAR(cc.v2(0,0)),o=180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI;o=360-o,o-=180,this.node.angle=-o}else this.type>=2&&(this.getComponent(cc.BoxCollider).tag=3)},e.prototype.initBullet=function(){var t=this;0==this.type||4==this.type?(this.audio.clip=this.clips[0],this.audio.play()):1==this.type?(this.audio.clip=this.clips[1],this.audio.volume=.3,this.audio.play()):this.audio.play(),0==this.type?(this.node.getComponent(cc.Animation).play("fireBall"),this.scheduleOnce(function(){t.node.destroy()},1)):1==this.type?(this.node.getComponent(cc.Animation).play("bat"),this.scheduleOnce(function(){t.node.destroy()},2.5)):2==this.type?(this.node.getComponent(cc.Animation).play("grasp"),this.scheduleOnce(function(){t.node.destroy()},1.5),this.node.getComponent(cc.Animation).callback=function(){t.isStop=!0,t.enemy.getComponent("Enemy").beGrasp(t.atk)}):3==this.type?(this.node.getComponent(cc.Animation).play("eject"),this.node.getComponent(cc.Animation).callback=function(){t.isStop=!0,t.enemy.getComponent("Enemy").beEjected(t.atk)},this.scheduleOnce(function(){t.node.destroy()},1.5)):4==this.type&&(this.getComponent(cc.BoxCollider).tag=4,this.node.getComponent(cc.Animation).play("fireBall"),this.node.color=cc.color(25,237,131),this.scheduleOnce(function(){t.node.destroy()},1))},e.prototype.onCollisionEnter=function(t){5==t.tag&&(0==this.type?t.node.getComponent("Enemy").beAtked(this.atk):1==this.type?t.node.getComponent("Enemy").beAtked(this.atk):this.type)},e.prototype.update=function(t){if(!this.isStop){var e=this.enemy.position.subtract(this.node.position).normalize(),o=cc.moveBy(t,cc.v2(e).multiply(cc.v2(5,5)));this.node.runAction(o)}},r([a(cc.AudioClip)],e.prototype,"clips",void 0),r([a(cc.AudioSource)],e.prototype,"audio",void 0),r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],Character:[function(t,e,o){"use strict";cc._RF.push(e,"386e1/ZYbJFzbCne7qXeqew","Character");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,s=t("../Manager"),a=cc._decorator,p=a.ccclass,l=a.property;(function(t){t[t.idle=0]="idle",t[t.atk=1]="atk"})(c||(c={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cFrames=[],e.preBullet=null,e.fight=null,e.enemies=null,e.type=0,e.state=c.idle,e.cd=0,e.leftAtkTimes=0,e.atkSpeed=1,e.atkDamage=10,e.cell=null,e}return i(e,t),e.prototype.start=function(){this.node.getComponent(cc.Sprite).spriteFrame=this.cFrames[this.type],this.node.height=1920,this.node.width=1240,this.cd=s.default.Instance.heroNumerical[this.type].cd,this.atkDamage=s.default.Instance.heroNumerical[this.type].atk+s.default.Instance.heroNumerical[this.type].upAtk*s.default.Instance.heroNumerical[this.type].upAtk,this.atkSpeed=s.default.Instance.heroNumerical[this.type].atkSpeed,this.leftAtkTimes=s.default.Instance.heroNumerical[this.type].times},e.prototype.onCollisionEnter=function(t){4==t.tag&&(this.cell.active=!0,this.node.active=!1)},e.prototype.atk=function(t){var e=this;if(!(this.leftAtkTimes<=0)){this.state=c.atk,this.leftAtkTimes--;var o=cc.instantiate(this.preBullet);o.getComponent("Bullet").enemy=t,o.getComponent("Bullet").type=this.type,o.position=this.node.position,o.getComponent("Bullet").atk=this.atkDamage,this.fight.addChild(o),this.scheduleOnce(function(){e.state=c.idle},this.atkSpeed),this.leftAtkTimes<=0&&(0==this.cd&&(this.cell.active=!0,this.node.destroy()),this.scheduleOnce(function(){e.leftAtkTimes=s.default.Instance.heroNumerical[e.type].times},this.cd))}},e.prototype.Action=function(){for(var t=null,e=null,o=0,n=this.enemies.children;o<n.length;o++){var i=n[o];if(0!=i.active){var r=i.position.subtract(this.node.position).mag();r<150&&(null==t?(t=i,e=r):e>r&&(t=i,e=r))}}null!=t&&this.state==c.idle&&this.atk(t)},e.prototype.update=function(){this.Action()},r([l(cc.SpriteFrame)],e.prototype,"cFrames",void 0),r([l(cc.Prefab)],e.prototype,"preBullet",void 0),r([p],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Manager":"Manager"}],Enemy:[function(t,e,o){"use strict";cc._RF.push(e,"3702cDsxkdHKIj1m5/n943U","Enemy");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frs=[],e.speed=.7,e.maxSpeed=.7,e.fightSc=null,e.hp=100,e.bossType=0,e.roadLine=[cc.v3(4,214.567),cc.v3(124.176,214.567),cc.v3(124.176,4),cc.v3(-150.444,4),cc.v3(-150.444,-232.614),cc.v3(217.687,-232.614),cc.v3(217.687,-419.705)],e.nowRoad=0,e}return i(e,t),e.prototype.start=function(){0==this.bossType?this.initMst():(1==this.bossType&&(this.hp+=1800+150*this.fightSc.customs,this.speed=.4),2==this.bossType&&(this.hp+=1400+80*this.fightSc.customs,this.speed=2)),this.node.setPosition(4,366.969),cc.director.getCollisionManager().enabled=!0,this.maxSpeed=this.speed},e.prototype.initMst=function(){var t=Math.round(3*Math.random());this.node.getComponent(cc.Sprite).spriteFrame=this.frs[t],0==t?(this.hp+=.5*this.hp,this.speed+=.5*this.speed):1==t?(this.hp+=.2*this.hp,this.speed+=.3*this.speed):2==t?(this.roadLine.shift(),this.roadLine.shift(),this.roadLine.shift(),this.speed+=.5*this.speed):3==t&&this.fireBall()},e.prototype.fireBall=function(){var t=this,e=5-Math.floor(this.fightSc.customs/3);console.log("cd"+e),this.schedule(function(){for(var e=null,o=null,n=0,i=t.fightSc.friends.children;n<i.length;n++){var r=i[n];if(0!=r.active){var c=r.position.subtract(t.node.position).mag();c<350&&(null==e?(e=r,o=c):o>c&&(e=r,o=c))}}if(null!=e){var s=cc.instantiate(t.bullet);s.getComponent("Bullet").enemy=e,s.getComponent("Bullet").type=4,s.position=t.node.position,t.fightSc.node.addChild(s)}},e)},e.prototype.onCollisionEnter=function(t){1==t.tag?(this.fightSc.enemyDie(),0!=this.bossType?this.fightSc.baseBeAtk(5):this.fightSc.baseBeAtk(1),this.node.active=!1):2==t.tag&&this.getComponent(cc.Animation).play("beATK")},e.prototype.beAtked=function(t){if(!(this.nowRoad<1)&&(this.hp-=t,this.hp<=0)){if(0==this.node.active)return;this.fightSc.enemyDie(),this.node.active=!1}},e.prototype.beGrasp=function(t){var e=this;this.speed=.7*this.maxSpeed,this.beAtked(t),this.scheduleOnce(function(){e.speed=e.maxSpeed},1)},e.prototype.beEjected=function(t){this.nowRoad<1?cc.tween(this.node).by(.5,{position:cc.v3(-40,0)}).start():(this.node.position.subtract(this.roadLine[this.nowRoad-1]).mag()<=50&&this.nowRoad>2?(this.nowRoad=this.nowRoad-1,cc.tween(this.node).to(.5,{position:this.roadLine[this.nowRoad-1]}).start()):cc.tween(this.node).to(.5,{position:this.roadLine[this.nowRoad-1]}).start(),this.beAtked(t))},e.prototype.update=function(t){if(this.node.position.sub(this.roadLine[this.nowRoad]).mag()<=10)this.nowRoad<this.roadLine.length&&this.nowRoad++;else{var e=this.roadLine[this.nowRoad].sub(this.node.position).normalize(),o=cc.moveBy(t,cc.v2(e.x*this.speed,e.y*this.speed));this.nowRoad<1&&(o=cc.moveBy(t,cc.v2(e.x*this.speed,7*e.y))),this.node.runAction(o)}},r([a(cc.SpriteFrame)],e.prototype,"frs",void 0),r([a(cc.Prefab)],e.prototype,"bullet",void 0),r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],FightCore:[function(t,e,o){"use strict";cc._RF.push(e,"6a2f9CumbhEyoiMjYkBhCJQ","FightCore");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Fight"),s=t("../Manager"),a=cc._decorator,p=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nowBigCustoms=0,e.UINode=null,e.bigCustomsPics=[],e.littlePics=[],e.bigSp=null,e.littleCusNode=null,e.preFight=null,e}return i(e,t),e.prototype.start=function(){this.initBigCus(),this.changeBigPic(),this.UINode=cc.find("Canvas/UI")},e.prototype.initBigCus=function(){var t=Math.floor(s.default.Instance.curMaxCustoms/3);t>3&&(t=3),this.nowBigCustoms=t},e.prototype.initLittleCus=function(){if(Math.floor(s.default.Instance.curMaxCustoms/3)<this.nowBigCustoms)for(var t=0,e=this.littleCusNode.children;t<e.length;t++)(n=e[t]).getComponent(cc.Sprite).spriteFrame=this.littlePics[0],n.getChildByName("Lbl").active=!1;else{var o=Math.floor(s.default.Instance.curMaxCustoms/3)>this.nowBigCustoms?3:s.default.Instance.curMaxCustoms%3;for(var n in this.littleCusNode.children)o>=parseInt(n)?(this.littleCusNode.children[n].getChildByName("Lbl").active=!0,this.littleCusNode.children[n].getChildByName("Lbl").getComponent(cc.Label).string=(3*this.nowBigCustoms+parseInt(n)+1).toString(),o>parseInt(n)?this.littleCusNode.children[n].getComponent(cc.Sprite).spriteFrame=this.littlePics[2]:this.littleCusNode.children[n].getComponent(cc.Sprite).spriteFrame=this.littlePics[1]):(this.littleCusNode.children[n].getComponent(cc.Sprite).spriteFrame=this.littlePics[0],this.littleCusNode.children[n].getChildByName("Lbl").active=!1)}},e.prototype.go=function(){var t;if(0!=(t=Math.floor(s.default.Instance.curMaxCustoms/3)>this.nowBigCustoms?3*this.nowBigCustoms+2:s.default.Instance.curMaxCustoms)||0==this.nowBigCustoms){var e=cc.instantiate(this.preFight);e.getComponent(c.default).customs=t,this.UINode.destroyAllChildren(),this.UINode.addChild(e)}else s.default.Instance.showTip("\u672a\u89e3\u9501\u6b64\u5173\u5361")},e.prototype.previous=function(){this.nowBigCustoms-=1,this.nowBigCustoms<0&&(this.nowBigCustoms=3),this.changeBigPic()},e.prototype.next=function(){this.nowBigCustoms+=1,this.nowBigCustoms>3&&(this.nowBigCustoms=0),this.changeBigPic()},e.prototype.changeBigPic=function(){this.bigSp.spriteFrame=this.bigCustomsPics[this.nowBigCustoms],this.initLittleCus()},r([l(cc.SpriteFrame)],e.prototype,"bigCustomsPics",void 0),r([l(cc.SpriteFrame)],e.prototype,"littlePics",void 0),r([l(cc.Sprite)],e.prototype,"bigSp",void 0),r([l(cc.Node)],e.prototype,"littleCusNode",void 0),r([l(cc.Prefab)],e.prototype,"preFight",void 0),r([p],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Fight":"Fight","../Manager":"Manager"}],Fight:[function(t,e,o){"use strict";cc._RF.push(e,"4a719JQ9yJEpqo+BD1cGEJC","Fight");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Manager"),s=cc._decorator,a=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cells=null,e.friends=null,e.enemies=null,e.cards=null,e.energyBar=null,e.preChar=null,e.preEnemy=null,e.pauseFr=[],e.customs=0,e.needEnergy=[30,35,25,25],e.energy=150,e.maxEnergy=150,e.selected=null,e.baseHp=10,e.leftEnemy=0,e.wave=1,e.UINode=null,e}var o;return i(e,t),o=e,e.prototype.start=function(){this.initCardBtn(),this.initEnergy(),this.initLbl(),this.UINode=cc.find("Canvas/UI")},e.prototype.autoAddEnergy=function(){var t=this;this.schedule(function(){t.energy+=2,t.energy>150&&(t.energy=150),t.energyBar.progress=t.energy/t.maxEnergy},1)},e.prototype.initEnergy=function(){for(var t in c.default.Instance.heroNumerical)this.needEnergy[t]=c.default.Instance.heroNumerical[t].needEnergy+c.default.Instance.heroNumerical[t].upNeedEnergy*c.default.Instance.heros[t],this.needEnergy[t]>50&&(this.needEnergy[t]=50),this.needEnergy[t]<5&&(this.needEnergy[t]=5),this.needEnergy[t]},e.prototype.back=function(){cc.director.resume(),this.UINode.addChild(cc.instantiate(this.preMain)),this.node.destroy()},e.prototype.next=function(){if(cc.director.resume(),this.customs+1>11)c.default.Instance.showTip("\u606d\u559c\uff0c\u60a8\u5df2\u901a\u5173\uff0c\u6ca1\u6709\u4e0b\u4e00\u5173\u5566");else{var t=cc.instantiate(this.preFight);t.getComponent(o).customs=this.customs+1,this.UINode.addChild(t),this.node.destroy()}},e.prototype.restart=function(){cc.director.resume();var t=cc.instantiate(this.preFight);t.getComponent(o).customs=this.customs,this.UINode.addChild(t),this.node.destroy()},e.prototype.initLbl=function(){this.baseLbl.string=this.baseHp.toString(),this.boardLbl.string=this.wave+"/3",this.gradeLbl.string=(c.default.Instance.heros[0]+1).toString()},e.prototype.generalBoss=function(t){var e=null;(e=1==t?cc.instantiate(this.preBoss1):cc.instantiate(this.preBoss2)).getComponent("Enemy").fightSc=this,e.getComponent("Enemy").bossType=t,this.enemies.addChild(e)},e.prototype.enemyDie=function(){var t=this;if(this.leftEnemy--,this.energy+=5,this.energy>150&&(this.energy=150),this.energyBar.progress=this.energy/this.maxEnergy,this.leftEnemy<=0)if(3==this.wave)this.node.getChildByName("victory").getChildByName("gain").getComponentInChildren(cc.Label).string=(100+100*this.customs).toString(),this.node.getChildByName("victory").active=!0,c.default.Instance.gold+=100+100*this.customs,this.customs==c.default.Instance.curMaxCustoms&&this.customs<=11&&c.default.Instance.curMaxCustoms++,c.default.Instance.saveLocalStorage(),cc.find("Canvas/Tip").removeAllChildren(),cc.director.pause();else{if(this.wave+=1,this.boardLbl.string=this.wave+"/3",3==this.wave&&this.customs%3==2&&this.customs/3>1){c.default.Instance.showTip("Boss\u6765\u88ad\uff01\u575a\u6301\u4f4f");var e=Math.floor(this.customs/3);1==e?(this.leftEnemy+=1,this.scheduleOnce(function(){t.generalBoss(1)},5)):2==e?(this.leftEnemy+=2,this.scheduleOnce(function(){t.generalBoss(1)},5),this.scheduleOnce(function(){t.generalBoss(2)},9)):3==e&&(this.leftEnemy+=3,this.scheduleOnce(function(){t.generalBoss(1)},5),this.scheduleOnce(function(){t.generalBoss(2)},8),this.scheduleOnce(function(){t.generalBoss(2)},10))}else c.default.Instance.showTip("\u4e00\u5927\u6ce2\u654c\u4eba\u5373\u5c06\u6765\u88ad\uff01");this.scheduleOnce(function(){t.enemies.removeAllChildren(),t.initEnemies(5+t.wave*(t.customs+1))},2)}},e.prototype.baseBeAtk=function(t){this.baseHp-=t,this.baseLbl.string=this.baseHp.toString(),this.baseHp<=0&&(cc.find("Canvas/Tip").removeAllChildren(),this.node.getChildByName("lose").active=!0,cc.director.pause())},e.prototype.gameStart=function(t){c.default.Instance.showTip("\u6e38\u620f\u5f00\u59cb\uff0c\u5b88\u62a4\u597d\u4f60\u7684\u57fa\u5730"),this.autoAddEnergy(),this.initEnemies(5+this.customs),t.getCurrentTarget().active=!1},e.prototype.initCardBtn=function(){var t=this,e=function(e){o.cards.children[e].on(cc.Node.EventType.TOUCH_START,function(){if(null==t.selected||e!=t.selected.toString()||1!=t.cells.active){if(t.energy<t.needEnergy[e])return c.default.Instance.showTip("\u80fd\u91cf\u4e0d\u8db3\uff0c\u65e0\u6cd5\u53ec\u5524"),void(t.cells.active=!1);t.selected=parseInt(e),t.showPlaces()}else t.cells.active=!1})},o=this;for(var n in this.cards.children)e(n)},e.prototype.pause=function(t){cc.director.isPaused()?(cc.director.resume(),t.getCurrentTarget().getComponent(cc.Sprite).spriteFrame=this.pauseFr[1]):(cc.director.pause(),t.getCurrentTarget().getComponent(cc.Sprite).spriteFrame=this.pauseFr[0])},e.prototype.showPlaces=function(){this.cells.active=!0,cc.tween(this.cells).repeatForever(cc.tween().to(.5,{opacity:50}).to(.5,{opacity:255})).start().start()},e.prototype.place=function(t){this.energy-=this.needEnergy[this.selected],this.energyBar.progress=this.energy/this.maxEnergy;var e=t.getCurrentTarget(),o=cc.instantiate(this.preChar),n=cc.v2(e.position.x,e.position.y+25);o.setPosition(n),o.getComponent("Character").type=this.selected,o.getComponent("Character").enemies=this.enemies,o.getComponent("Character").fight=this.node,o.getComponent("Character").cell=e,this.friends.addChild(o),e.active=!1,this.cells.active=!1},e.prototype.initEnemies=function(t){var e=this;this.leftEnemy+=t+1,this.schedule(function(){var t=cc.instantiate(e.preEnemy);t.getComponent("Enemy").fightSc=e,t.getComponent("Enemy").hp=100+15*e.customs,e.enemies.addChild(t)},2,t)},r([p(cc.Node)],e.prototype,"cells",void 0),r([p(cc.Node)],e.prototype,"friends",void 0),r([p(cc.Node)],e.prototype,"enemies",void 0),r([p(cc.Node)],e.prototype,"cards",void 0),r([p(cc.ProgressBar)],e.prototype,"energyBar",void 0),r([p(cc.Prefab)],e.prototype,"preChar",void 0),r([p(cc.Prefab)],e.prototype,"preEnemy",void 0),r([p(cc.SpriteFrame)],e.prototype,"pauseFr",void 0),r([p(cc.Label)],e.prototype,"baseLbl",void 0),r([p(cc.Prefab)],e.prototype,"preMain",void 0),r([p(cc.Label)],e.prototype,"boardLbl",void 0),r([p(cc.Label)],e.prototype,"gradeLbl",void 0),r([p(cc.Prefab)],e.prototype,"preFight",void 0),r([p(cc.Prefab)],e.prototype,"preBoss1",void 0),r([p(cc.Prefab)],e.prototype,"preBoss2",void 0),o=r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./Manager":"Manager"}],Main:[function(t,e,o){"use strict";cc._RF.push(e,"49835SsGChBTJfI0XEbyRfZ","Main");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Manager"),s=cc._decorator,a=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.core=null,e.upLayer=null,e.UINode=null,e.preRoleCore=null,e.preFightCore=null,e.buttonFr=[],e.signPrefab=null,e.preStore=null,e.fightPrefab=null,e.LblGold=null,e.LblGrade=null,e}return i(e,t),e.prototype.start=function(){this.initNode(),this.initLbl()},e.prototype.initLbl=function(){this.LblGold.string=c.default.Instance.gold.toString(),this.LblGrade.string=(c.default.Instance.heros[0]+1).toString()},e.prototype.initNode=function(){this.core=this.node.getChildByName("core"),this.upLayer=cc.find("Canvas/upLayer"),this.UINode=cc.find("Canvas/UI"),this.core.addChild(cc.instantiate(this.preFightCore))},e.prototype.onBtnClick=function(t){var e=t.getCurrentTarget();if("role"==e.name){e.getComponent(cc.Sprite).spriteFrame=this.buttonFr[3],e.parent.getChildByName("fight").getComponent(cc.Sprite).spriteFrame=this.buttonFr[0],this.core.removeAllChildren();var o=cc.instantiate(this.preRoleCore);o.getComponent("RoleCore").mainSc=this,this.core.addChild(o)}else if("fight"==e.name)e.getComponent(cc.Sprite).spriteFrame=this.buttonFr[1],e.parent.getChildByName("role").getComponent(cc.Sprite).spriteFrame=this.buttonFr[2],this.core.removeAllChildren(),this.core.addChild(cc.instantiate(this.preFightCore));else if("sign"==e.name){var n=cc.instantiate(this.signPrefab);n.getComponent("Sign").mainCtrl=this,this.upLayer.addChild(n)}else if("go"==e.name){var i=cc.instantiate(this.fightPrefab);this.UINode.addChild(i)}else if("gold"==e.name){var r=cc.instantiate(this.preStore);r.getComponent("Store").mainCtrl=this,this.UINode.addChild(r)}},r([p(cc.Prefab)],e.prototype,"preRoleCore",void 0),r([p(cc.Prefab)],e.prototype,"preFightCore",void 0),r([p(cc.SpriteFrame)],e.prototype,"buttonFr",void 0),r([p(cc.Prefab)],e.prototype,"signPrefab",void 0),r([p(cc.Prefab)],e.prototype,"preStore",void 0),r([p(cc.Prefab)],e.prototype,"fightPrefab",void 0),r([p(cc.Label)],e.prototype,"LblGold",void 0),r([p(cc.Label)],e.prototype,"LblGrade",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./Manager":"Manager"}],Manager:[function(t,e,o){"use strict";cc._RF.push(e,"089efh+fz9HuYbZowhrs1C9","Manager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.grade=0,e.heros=[0,0,0,0],e.curMaxCustoms=0,e.signNum=-1,e.preSignDay=null,e.gold=100,e.heroNumerical=[{atk:7,needEnergy:30,atkSpeed:.2,times:15,cd:4,upAtk:3,upNeedEnergy:1},{atk:20,needEnergy:35,atkSpeed:1,times:1,cd:3,upAtk:15,upNeedEnergy:0},{atk:8,needEnergy:25,atkSpeed:1,times:9999,cd:0,upAtk:1,upNeedEnergy:-2},{atk:40,needEnergy:25,atkSpeed:3,times:3,cd:0,upAtk:30,upNeedEnergy:0}],e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){null==o.Instance?o.Instance=this:(console.error("two manager"),this.destroy())},e.prototype.start=function(){this.localStorageFun()},e.prototype.saveLocalStorage=function(){var t=[this.grade,this.heros,this.curMaxCustoms,this.signNum,this.preSignDay,this.gold];cc.sys.localStorage.setItem("localStorageArr0",JSON.stringify(t))},e.prototype.getLocalStorage=function(t){this.grade=t[0],this.heros=t[1],this.curMaxCustoms=t[2],this.signNum=t[3],this.preSignDay=t[4],this.gold=t[5]},e.prototype.localStorageFun=function(){var t=cc.sys.localStorage.getItem("localStorageArr0");null==t?this.saveLocalStorage():this.getLocalStorage(JSON.parse(t))},e.prototype.showTip=function(t){var e=cc.instantiate(this.preTip);e.getChildByName("LblContent").getComponent(cc.Label).string=t,this.TipNode.addChild(e),this.scheduleOnce(function(){e.destroy()},1)},e.Instance=null,r([a(cc.Prefab)],e.prototype,"preTip",void 0),r([a(cc.Node)],e.prototype,"TipNode",void 0),o=r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],PlatfomApi:[function(t,e,o){"use strict";cc._RF.push(e,"68a52djWtBKfZqCqGuA/nEq","PlatfomApi");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.PlatformApi=void 0;var c=cc._decorator,s=c.ccclass,a=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.storeInstance=null,e}var o;return i(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return o._instance||(window.PlatformApi=new o,o._instance=new o),o._instance},enumerable:!1,configurable:!0}),e.prototype.BuyProduct=function(t){console.log("BuyProduct "+t),cc.sys.platform==cc.sys.ANDROID||(cc.sys.platform==cc.sys.IPHONE||cc.sys.platform==cc.sys.IPAD?jsb.reflection.callStaticMethod("IAPInterface","BuyProduct:",t):this.storeInstance.buySuccess(t))},e.prototype.RequstProductInfo=function(t){console.log("RequstProductInfo "+t),cc.sys.platform==cc.sys.ANDROID||cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||jsb.reflection.callStaticMethod("IAPInterface","RequstProductInfo:",t)},e.prototype.RestoreBuyProduct=function(t){console.log("RestoreBuyProduct "+t),cc.sys.platform==cc.sys.ANDROID||cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||jsb.reflection.callStaticMethod("IAPInterface","RestoreBuyProduct:",t)},e.prototype.BuyProcuctSucessCallBack=function(t){this.storeInstance.buySuccess(t),console.log("BuyProcuctSucessCallBack "+t)},e.prototype.BuyProcuctFailedCallBack=function(t){console.log("BuyProcuctFailedCallBack "+t)},e.prototype.ShowProductList=function(t){console.log("ShowProductList "+t)},e.prototype.RestoreBuyProductSucessCallBack=function(t){console.log("RestoreBuyProductSucessCallBack "+t)},e._instance=null,o=r([s("PlatformApi")],e)}(cc.Component));o.PlatformApi=a,cc._RF.pop()},{}],RoleCore:[function(t,e,o){"use strict";cc._RF.push(e,"a163855Z/dC/4VWVdrQ0oZA","RoleCore");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Manager"),s=cc._decorator,a=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardFr=[],e.roleFr=[],e.infoNodes=[],e.cards=null,e.goldLbls=[],e.mainSc=null,e}return i(e,t),e.prototype.start=function(){this.initLbl()},e.prototype.initLbl=function(){for(var t in this.infoNodes){var e=c.default.Instance.heros[t],o=c.default.Instance.heroNumerical[t].atk+c.default.Instance.heroNumerical[t].upAtk*e,n=c.default.Instance.heroNumerical[t].needEnergy+c.default.Instance.heroNumerical[t].upNeedEnergy*e;n>50?n=50:n<5&&(n=5),this.goldLbls[t].string=(200+300*e).toString(),this.infoNodes[t].getChildByName("LblGrade").getComponent(cc.Label).string=(e+1).toString(),this.infoNodes[t].getChildByName("LblAtk").getComponent(cc.Label).string=o.toString(),this.infoNodes[t].getChildByName("LblEnergy").getComponent(cc.Label).string=n.toString()}},e.prototype.onBtnClick=function(t,e){var o=this,n=t.getCurrentTarget();"roleCard"==n.name?n.getComponent(cc.Sprite).spriteFrame==this.cardFr[e]?(n.parent.getChildByName("info").active=!1,n.getComponent(cc.Sprite).spriteFrame=this.roleFr[e]):(n.parent.getChildByName("info").active=!0,n.getComponent(cc.Sprite).spriteFrame=this.cardFr[e]):(n.name="upgrade")&&(c.default.Instance.gold<200+300*c.default.Instance.heros[e]?c.default.Instance.showTip("\u91d1\u5e01\u4e0d\u8db3"):(c.default.Instance.gold-=200+300*c.default.Instance.heros[e],c.default.Instance.heros[e]++,c.default.Instance.saveLocalStorage(),this.initLbl(),this.mainSc.initLbl(),this.node.getChildByName("upgradeTip").active=!0,this.scheduleOnce(function(){o.node.getChildByName("upgradeTip").active=!1},1)))},r([p(cc.SpriteFrame)],e.prototype,"cardFr",void 0),r([p(cc.SpriteFrame)],e.prototype,"roleFr",void 0),r([p(cc.Node)],e.prototype,"infoNodes",void 0),r([p(cc.Node)],e.prototype,"cards",void 0),r([p(cc.Label)],e.prototype,"goldLbls",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../Manager":"Manager"}],Sign:[function(t,e,o){"use strict";cc._RF.push(e,"86673/Ri6lAXZaMuHCy1jHn","Sign");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Manager"),s=cc._decorator,a=s.ccclass,p=s.property,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){this._start()},e.prototype._start=function(){var t=this,e=new Date((new Date).toLocaleDateString()).getTime();c.default.Instance.preSignDay+864e5!=e&&c.default.Instance.preSignDay!=e&&(c.default.Instance.preSignDay=null,c.default.Instance.signNum=-1),c.default.Instance.preSignDay+864e5==e&&6==c.default.Instance.signNum&&(c.default.Instance.preSignDay=null,c.default.Instance.signNum=-1);var o=function(e){n.coreNode.children[e].on(cc.Node.EventType.TOUCH_START,function(){t.sign(parseInt(e))})},n=this;for(var i in this.coreNode.children)o(i);this.initBtn()},e.prototype.initBtn=function(){for(var t in this.coreNode.children)c.default.Instance.signNum>=Number.parseInt(t)&&(this.coreNode.children[t].getChildByName("already").active=!0)},e.prototype.sign=function(t){if(c.default.Instance.signNum+1==t){var e=new Date((new Date).toLocaleDateString()).getTime();console.log(c.default.Instance.preSignDay),console.log(e),c.default.Instance.preSignDay+864e5==e||null==c.default.Instance.preSignDay?(c.default.Instance.signNum=t,c.default.Instance.preSignDay=e,t<6?(c.default.Instance.gold+=100+100*t,c.default.Instance.showTip("\u7b7e\u5230\u6210\u529f,\u5df2\u83b7\u5f97"+(100+100*t)+"\u91d1\u5e01")):(c.default.Instance.gold+=1e3,c.default.Instance.showTip("\u7b7e\u5230\u6210\u529f,\u5df2\u83b7\u5f971000\u91d1\u5e01")),this.mainCtrl.initLbl(),c.default.Instance.saveLocalStorage(),this.initBtn()):c.default.Instance.preSignDay==e&&c.default.Instance.showTip("\u7b7e\u5230\u5931\u8d25,\u4f60\u4eca\u5929\u5df2\u7ecf\u7b7e\u5230\u8fc7\u4e86")}},e.prototype.close=function(){this.node.destroy()},r([p(cc.Node)],e.prototype,"coreNode",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../Manager":"Manager"}],Start:[function(t,e,o){"use strict";cc._RF.push(e,"10eb5IU/c5Br5dFCSS0bKqD","Start");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Manager"),s=cc._decorator,a=s.ccclass,p=s.property,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},e.prototype.startBtn=function(){this.UINode.addChild(cc.instantiate(this.mainPrefab)),this.node.destroy()},e.prototype.chooseRole=function(){c.default.Instance.showTip("\u6682\u672a\u5f00\u653e")},e.prototype.chooseArea=function(){c.default.Instance.showTip("\u6682\u672a\u5f00\u653e")},r([p(cc.Prefab)],e.prototype,"mainPrefab",void 0),r([p(cc.Node)],e.prototype,"UINode",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./Manager":"Manager"}],Store:[function(t,e,o){"use strict";cc._RF.push(e,"78d0dbrPpxK96Nvqv0o/XE0","Store");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Manager"),s=t("./PlatfomApi"),a=cc._decorator,p=a.ccclass,l=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){s.PlatformApi.Instance.storeInstance=this},e.prototype.close=function(){this.node.destroy()},e.prototype.Applepay=function(t,e){s.PlatformApi.Instance.BuyProduct(e)},e.prototype.buySuccess=function(t){switch(t){case"6":this.showSuceess(500),c.default.Instance.gold+=500;break;case"30":this.showSuceess(3e3),c.default.Instance.gold+=2800;break;case"68":this.showSuceess(7800),c.default.Instance.gold+=6600;break;case"118":this.showSuceess(13800),c.default.Instance.gold+=14e3;break;case"198":this.showSuceess(29800),c.default.Instance.gold+=2e4}this.mainCtrl.initLbl(),c.default.Instance.saveLocalStorage()},e.prototype.showSuceess=function(t){c.default.Instance.showTip(t+"\u91d1\u5e01\u8d2d\u4e70\u6210\u529f\uff01")},r([p],e)}(cc.Component));o.default=l,cc._RF.pop()},{"../Manager":"Manager","./PlatfomApi":"PlatfomApi"}]},{},["Bullet","Character","Enemy","FightCore","PlatfomApi","RoleCore","Sign","Store","Fight","Main","Manager","Start"]);